  <div id="controls">
    <div id="homeroom-dropdown" class="dropdown">
      <p>Homeroom:</p>
      <select id="homeroom-select">
        <% @homerooms_by_name.each do |r| %>
          <option <% if r == @homeroom %>selected<% end %> value="<%= r.slug %>">
            <%= r.name %>
          </option>
        <% end %>
      </select>
    </div>
    <div id="roster-tooltip" class="tooltip-trigger">
      <p>Help</p>
      <span id="roster-help-icon">?</span>
    </div>
    <div id="column-group-dropdown" class="dropdown">
      <select id="column-group-select" class="chosen-select" data-placeholder="Choose information to show..." tabindex="4" multiple>
        <option value="name" <% if cookies[:columns_selected].include?("name") %>selected<% end %>>
          Name
        </option>
        <option value="risk" <% if cookies[:columns_selected].include?("risk") %>selected<% end %>>
            Risk Level
        </option>
        <option value="program" <% if cookies[:columns_selected].include?("program") %>selected<% end %>>
          Program
        </option>
        <option value="language" <% if cookies[:columns_selected].include?("language") %>selected<% end %>>
          Language
        </option>
        <option value="free-reduced" <% if cookies[:columns_selected].include?("free-reduced") %>selected<% end %>>
          Free/Reduced Lunch
        </option>
        <option value="sped" <% if cookies[:columns_selected].include?("sped") %>selected<% end %>>
          SPED & Disability
        </option>
        <% if @homeroom.show_star? %>
          <option value="star" <% if cookies[:columns_selected].include?("star") %>selected<% end %>>
            STAR
          </option>
        <% end %>
        <% if @homeroom.show_mcas? %>
          <option value="mcas" <% if cookies[:columns_selected].include?("mcas") %>selected<% end %>>
            MCAS
          </option>
        <% end %>
        <option value="access" <% if cookies[:columns_selected].include?("access") %>selected<% end %>>
          ACCESS
        </option>
        <% if @homeroom.show_dibels? %>
          <option value="dibels" <% if cookies[:columns_selected].include?("dibels") %>selected<% end %>>
            DIBELS
          </option>
        <% end %>
        <option value="attendance" <% if cookies[:columns_selected].include?("attendance") %>selected<% end %>>
          Attendance
        </option>
        <option value="discipline" <% if cookies[:columns_selected].include?("discipline") %>selected<% end %>>
          Discipline
        </option>
      </select>
    </div>
  </div>
  <div class="info-area">
    <table id="roster-table" border="0" cellspacing="0" cellpadding="10" class="sort-default">
      <thead>
        <tr class="column-groups">
          <!-- TOP-LEVEL COLUMN GROUPS -->
          <!-- i.e. "MCAS", "STAR" -->
          <td colspan="1" class="name <%= initial_show_or_hide('name') %>"></td>
          <td colspan="1" class="risk <%= initial_show_or_hide('risk') %>"></td>
          <td colspan="1" class="program <%= initial_show_or_hide('program') %>"></td>
          <td colspan="3" class="sped <%= initial_show_or_hide('sped') %>"><p class="smalltype">SPED & Disability</p></td>
          <td colspan="2" class="language <%= initial_show_or_hide('language') %>"><p class="smalltype">Language</p></td>
          <td colspan="1" class="free-reduced <%= initial_show_or_hide('free-reduced') %>"></td>
          <% if @homeroom.show_star? %>
            <td colspan="3" class="star <%= initial_show_or_hide('star') %>"><p class="smalltype">STAR</p></td>
          <% end %>
          <% if @homeroom.show_mcas? %>
            <td colspan="4" class="mcas <%= initial_show_or_hide('mcas') %>"><p class="smalltype">MCAS</p></td>
          <% end %>
          <td colspan="3" class="access <%= initial_show_or_hide('access') %>"><p class="smalltype">ACCESS</p></td>
          <% if @homeroom.show_dibels? %>
            <td colspan="1" class="dibels <%= initial_show_or_hide('dibels') %>"><p class="smalltype">DIBELS</p></td>
          <% end %>
          <td colspan="2" class="attendance <%= initial_show_or_hide('attendance') %>"><p class="smalltype">Attendance</p></td>
          <td colspan="1" class="discipline <%= initial_show_or_hide('discipline') %>"><p class="smalltype">Discipline</p></td>
        </tr>
        <tr class="column-names">
          <!-- COLUMN HEADERS -->
          <!-- i.e. "MCAS Math Growth", "STAR Reading Performance" -->
          <th class="name <%= initial_show_or_hide('name') %>">
            <span id="first-column-header" class="table-header">
              Name
            </span>
          </th>
          <th class="risk sort-default <%= initial_show_or_hide('risk') %>" data-sort-method="reverse_number">
            <span class="table-header">
              Risk
            </span>
          </th>
          <th class="program <%= initial_show_or_hide('program') %>">
            <span class="table-header">Program Assigned</span>
          </th>
          <th class="sped <%= initial_show_or_hide('sped') %>">
            <span class="table-header">Disability</span>
          </th>
          <th class="sped <%= initial_show_or_hide('sped') %>">
            <span class="table-header">Level of Need</span>
          </th>
          <th class="sped <%= initial_show_or_hide('sped') %>">
            <span class="table-header">504 Plan</span>
          </th>
          <th class="language <%= initial_show_or_hide('language') %>">
            <span class="table-header">Fluency</span>
          </th>
          <th class="language <%= initial_show_or_hide('language') %>">
            <span class="table-header">Home Language</span>
          </th>
          <th class="free-reduced <%= initial_show_or_hide('free-reduced') %>">
            <span class="table-header">Free/Reduced Lunch</span>
          </th>
          <% if @homeroom.show_star? %>
            <th class="star <%= initial_show_or_hide('star') %>" data-sort-method="number">
              <span class="table-header">Percentile</span>
            </th>
            <th class="star <%= initial_show_or_hide('star') %>" data-sort-method="number">
              <span class="table-header">Percentile</span>
            </th>
            <th class="star <%= initial_show_or_hide('star') %>" data-sort-method="number">
              <span class="table-header">Reading Level</span>
            </th>
          <% end %>
          <% if @homeroom.show_mcas? %>
            <th class="mcas <%= initial_show_or_hide('mcas') %>" data-sort-method="mcas_sort">
              <span class="table-header">Performance</span>
            </th>
            <th class="mcas <%= initial_show_or_hide('mcas') %>" data-sort-method="number">
              <span class="table-header">Growth</span>
            </th>
            <th class="mcas <%= initial_show_or_hide('mcas') %>" data-sort-method="mcas_sort">
              <span class="table-header">Performance</span>
            </th>
            <th class="mcas <%= initial_show_or_hide('mcas') %>" data-sort-method="number">
              <span class="table-header">Growth</span>
            </th>
          <% end %>
          <th class="access <%= initial_show_or_hide('access') %>">
            <span class="table-header">Score</span>
          </th>
          <th class="access <%= initial_show_or_hide('access') %>">
            <span class="table-header">Level</span>
          </th>
          <th class="access <%= initial_show_or_hide('access') %>">
            <span class="table-header">Growth</span>
          </th>
          <% if @homeroom.show_dibels? %>
            <th class="dibels <%= initial_show_or_hide('dibels') %>">
              <span class="table-header">Level</span>
            </th>
          <% end %>
          <th class="attendance <%= initial_show_or_hide('attendance') %>">
            <span class="table-header">Absences</span>
          </th>
          <th class="attendance <%= initial_show_or_hide('attendance') %>">
            <span class="table-header">Tardies</span>
          </th>
          <th class="discipline <%= initial_show_or_hide('discipline') %>">
            <span class="table-header">Behavior Incidents</span>
          </th>
        </tr>
     </thead>
      <% if @rows.present? %>
        <!-- ROWS -->
        <% @rows.each do |row| %>
          <%= render "student_row",
              student: row[:student],
              presenter: row[:student_presenter],
              assessment_data: row[:assessment_data] unless row.nil? %>
        <% end %>
      <% end %>
    </table>
  </div>

  <script id="roster-tooltip-template" type="x-tmpl-mustache">
    <div class="tooltip-popup">
      <div class="warning-header">
        <div class="warning-dot"></div>
        <h6>Warning Indicators</h6>
      </div>
      <div class="warning-set">
        <p><strong>MCAS Performance:</strong> Warning</p>
        <p><strong>MCAS Growth:</strong> Below the 40th percentile</p>
        <p><strong>STAR Percentile:</strong> Below the 40th percentile</p>
        <p><strong>STAR Reading IRL:</strong> A year or more behind</p>
      </div>
    </div>
  </script>

  <% @student_risk_levels.each do |risk_level| %>
    <script class="risk-level-tooltip" type="x-tmpl-mustache" data-student-id="<%= risk_level[:student_id] %>">
      <div class="tooltip-popup student-risk-level-tooltip">
        <%= risk_level[:explanation].html_safe %>
      </div>
    </script>
  <% end %>
